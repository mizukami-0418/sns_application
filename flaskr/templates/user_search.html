{% from "_formhelpers.html" import render_field %}
{% extends "base.html" %}
{% block title %}
ユーザー検索 - {{ super() }}
{% endblock %}
{% block content %}
<div class="container">
  <div class="bg-light text-success">
    <h1>ユーザー検索</h1>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    <form method="POST">
      {{ form.csrf_token }}
      {{ render_field(form.username) }}
      {{ form.submit() }}
    </form>
  </div>
  <div class="col-lg-12">
    {% if users %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">プロフィール画像</th>
          <th scope="col">ユーザー名</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <th scope="col">{{ loop.index }}</th>
          {% if user.picture_path %}
          <th scope="col">
            {% set img_src = url_for('static', filename=user.picture_path) %}
            <img class="img-fluid" src="{{ img_src }}" alt="{{ user.username }}" style="max-width: 100px; max-height: 100px;">
          </th>
          {% else %}
          <th scope="col"></th>
          {% endif %}
          <th scope="col">{{ user.username }}</th>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </div>
</div>
{% endblock %}